import socket
import time
import struct
import subprocess

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

address = 'localhost', 1024
started = True
connected = False
wait_time = 1

while started:
    try:
        s.connect(address)
        connected = True
        while connected:
            cmd = s.recv(1024)
            

    except ConnectionRefusedError as e:
        print('Connection Refused...')
        print(f'Reconnecting to {address} in {wait_time}s')
        time.sleep(wait_time)
        wait_time += 1
    except ConnectionResetError as e:
        print('Server Disconnected Connection')
        started = False

